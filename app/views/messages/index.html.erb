<div class="container">
    <h1 class="text-center"> Message </h1>
    <div class="table-responsive">
    <table class="table table-striped table-bordered">
        <thead class="thead-dark">
        <tr>
            <th>Chat Number</th>
            <th>User Sender</th>
            <th>Message Body</th>
            <th>Details</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
        </thead>
        <tbody>
        <tbody>
            <% @messages.each do |message| %>
            <tr>
                <td>
                Chat <%= message.chat.id %> 
                (<%= message.chat.sender.first_name %> <%= message.chat.sender.last_name %>, 
                <%= message.chat.receiver.first_name %> <%= message.chat.receiver.last_name %>)
                </td>
                <td>
                <%= message.user.first_name %> <%= message.user.last_name %>
                </td>
                <td><%= message.body %></td>
                <td class="text-center">
                <%= link_to 'Show', message_path(message), class: 'btn btn-secondary btn-sm' %>
                </td>
                <td class="text-center">
                <% if can? :edit, message %>
                    <%= link_to 'Edit', edit_message_path(message), class: 'btn btn-warning btn-sm' %>
                <% end %>
                </td>
                <td class="text-center">
                <% if can? :destroy, message %>
                    <%= button_to 'Delete', message_path(message), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
                <% end %>
                </td>
            </tr>
            <% end %>
        </tbody>
    </table>
    </div>
    <div class="d-flex justify-content-center mb-3">
        <%= link_to 'Add Message', new_message_path, class: 'btn btn-primary' %>
    </div>
</div>